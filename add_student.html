<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Bus Tracking System-Admin Panel</title>

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <!-- Bootstrap Icons CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
    <!-- SweetAlert2 for better alert dialogs -->

    <title>Landlord Panel</title>
    <style>
      #dashboard-menu {
        position: fixed;
        height: 100%;
      }
    </style>
  </head>

  <body class="bg-light">
    <div
      class="container-fluid bg-dark text-light p-3 d-flex align-items-center justify-content-between sticky-top"
    >
      <h3 class="mb-0 h-font">Bus Tracking System-Admin Dashboard</h3>
      <a href="admin_login.html" class="btn btn-light btn-sm">LOG OUT</a>
    </div>

    <div
      class="col-lg-2 bg-dark border-top border-3 border-secondary"
      id="dashboard-menu"
    >
      <nav class="navbar navbar-expand-lg coustom-bg">
        <div class="container-fluid flex-lg-column align-items-stretch">
          <h5 class="mt-2 text-light">Admin panel</h5>
          <button
            class="navbar-toggler"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#admindropdown"
            aria-controls="navbarNav"
            aria-expanded="false"
            aria-label="Toggle navigation"
          >
            <span class="navbar-toggler-icon"></span>
          </button>
          <div
            class="collapse navbar-collapse flex-column align-items-stretch mt-2"
            id="admindropdown"
          >
            <ul class="nav nav-pills flex-column">
              <li class="nav-item">
                <a class="nav-link text-white" href="admin_page.html"
                  >Bus Registration</a
                >
              </li>
              <li class="nav-item">
                <a class="nav-link text-white" href="add_student.html"
                  >Student Registration</a
                >
              </li>
              <li class="nav-item">
                <a class="nav-link text-white" href="special.html"
                  >Special Messages</a
                >
              </li>
              <li class="nav-item">
                <a class="nav-link text-white" href="add_schedule.html"
                  >Add Schedule</a
                >
              </li>
              <li class="nav-item">
                <a class="nav-link text-white" href="map.html">Map</a>
              </li>
            </ul>
          </div>
        </div>
      </nav>
    </div>

    <div class="container-fluid" id="main-content">
      <div class="row">
        <div class="col-lg-10 ms-auto p-4 overflow-hidden">
          <div class="container">
            <h2>Student Registration</h2>
            <form id="studentRegistrationForm" style="width: 700px">
              <div class="mb-3">
                <label for="studentName" class="form-label">Name</label>
                <input
                  type="text"
                  class="form-control"
                  id="studentName"
                  required
                />
              </div>
              <div class="mb-3">
                <label for="studentEmail" class="form-label">Email</label>
                <input
                  type="email"
                  class="form-control"
                  id="studentEmail"
                  required
                />
              </div>
              <div class="mb-3">
                <label for="studentPassword" class="form-label">Password</label>
                <input
                  type="password"
                  class="form-control"
                  id="studentPassword"
                  required
                />
              </div>
              <div class="mb-3">
                <label for="universityId" class="form-label"
                  >University ID Number</label
                >
                <input
                  type="text"
                  class="form-control"
                  id="universityId"
                  required
                />
              </div>
              <button type="submit" class="btn bg-dark text-light shadow-none">
                Register
              </button>
            </form>
          </div>
        </div>
      </div>
    </div>

    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-app.js";
      import {
        getDatabase,
        ref,
        push,
      } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-database.js";

      // Firebase configuration
      const firebaseConfig = {
        apiKey: "AIzaSyCKYdEtZmhE_GLfR1LsIKf75e_YbQjDvSs",
        authDomain: "computing-project-f65ec.firebaseapp.com",
        databaseURL:
          "https://computing-project-f65ec-default-rtdb.firebaseio.com",
        projectId: "computing-project-f65ec",
        storageBucket: "computing-project-f65ec.appspot.com",
        messagingSenderId: "126022707574",
        appId: "1:126022707574:web:795b761b783e0dfa62f257",
        measurementId: "G-XG2N2HVR9M",
      };
      // Initialize Firebase
      const firebaseApp = initializeApp(firebaseConfig);
      const database = getDatabase(firebaseApp);

      // Form submission event listener
      const studentRegistrationForm = document.getElementById(
        "studentRegistrationForm"
      );
      studentRegistrationForm.addEventListener("submit", (event) => {
        event.preventDefault(); // Prevent form submission

        // Get student information from form
        const studentName = document.getElementById("studentName").value;
        const studentEmail = document.getElementById("studentEmail").value;
        const studentPassword =
          document.getElementById("studentPassword").value;
        const universityId = document.getElementById("universityId").value;

        // Store student data in Firebase Realtime Database
        const studentsRef = ref(database, "students");
        push(studentsRef, {
          name: studentName,
          email: studentEmail,
          password: studentPassword, // Include password in the data
          universityId: universityId,
        })
          .then(() => {
            // Student data stored successfully
            console.log("Student registered successfully");
            alert("Student registered successfully!");
            // Clear form fields
            studentRegistrationForm.reset();
          })
          .catch((error) => {
            // Handle errors
            console.error("Error registering student:", error.message);
            alert("Error registering student: " + error.message);
          });
      });
    </script>
  </body>
</html>
