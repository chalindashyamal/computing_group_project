<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="index.css" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
      crossorigin="anonymous"
    ></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css"
      integrity="sha512-SzlrxWUlpfuzQ+pcUCosxcglQRNAq/DZjVsC0lE40xsADsfeQoEypE+enwcOiGjk/bSuGGKHEyjSoQ1zVisanQ=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css"
      integrity="sha512-SzlrxWUlpfuzQ+pcUCosxcglQRNAq/DZjVsC0lE40xsADsfeQoEypE+enwcOiGjk/bSuGGKHEyjSoQ1zVisanQ=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
    />
    <title>Bus Tracking System-Home</title>
  </head>

  <body>
    <section id="header">
      <nav class="navbar navbar-light">
        <div class="container-fluid">
          <a class="navbar-brand" href="#"><img src="img/logo-white.png" /></a>
          <button
            class="navbar-toggler"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#navbarNav"
            aria-controls="navbarNav"
            aria-expanded="false"
            aria-label="Toggle navigation"
          >
            <i class="fa fa-bars"></i>
          </button>
          <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav mr-auto">
              <li class="nav-item">
                <a class="nav-link" href="index.html">HOME</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="book.html">BOOK NOW</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="calender.html">CALENDER</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="pick_bus.html">GET BUS LOCATION</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="contact.html">Contact Us</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="admin_login.html">Log Out</a>
              </li>
            </ul>
          </div>
        </div>
      </nav>
    </section>
    <!-- welcome text -->
    <section id="welcome">
      <div class="container">
        <div class="welcome text-center wow slideInLeft">
          <h1>STAY ON SCHEDULE AND NEVER MISS YOUR RIDE</h1>
        </div>
      </div>
    </section>

    <!-- about us -->
    <section id="about">
      <div class="container">
        <div class="row">
          <div class="col-md-5 text-center">
            <img src="img/bus_stop.jpeg" class="img-fluid" />
          </div>
          <div class="col-md-6 text-justify">
            <h3>Real-Time Tracking</h3>
            <p>
              Our bus tracking website provides real-time updates on the
              location of university buses, allowing students to see exactly
              where their bus is at any given moment. This feature ensures that
              students can plan their journeys effectively, minimizing wait
              times at bus stops and reducing the risk of missing their rides
            </p>
            <h3>Reliable Schedule Information</h3>
            <p>
              By accessing our website, students can access reliable schedule
              information for university bus routes. Whether it's the start and
              end times of routes or any potential delays or changes, our
              platform keeps students informed, enabling them to make informed
              decisions about their transportation needs.
            </p>

            <h3>User-Friendly Interface</h3>
            <p>
              Our website boasts a user-friendly interface designed with
              students in mind. With intuitive navigation and clear display of
              bus routes and schedules, students can easily access the
              information they need without any hassle. This ensures a seamless
              experience for users, whether they're accessing the site from
              their computer or mobile device.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- service -->

    <section id="service">
      <div class="container">
        <div class="row">
          <div class="col-md-4 bg-light">
            <h4>Accessibility Anytime, Anywhere</h4>
            <p>
              Unlike traditional methods of tracking buses, such as relying on
              printed schedules or calling for updates, our webpage offers
              accessibility anytime, anywhere. Whether students are at home, in
              the library, or on the go, they can easily access our website
              using their computer, smartphone, or tablet.
            </p>
          </div>
          <div class="col-md-4 bg-light">
            <h4>Instant Updates and Notifications</h4>
            <p>
              Our webpage provides users with instant updates and notifications
              regarding bus routes, schedules, and any unexpected changes or
              delays. Through push notifications or email alerts, users can stay
              informed in real-time, ensuring they never miss important
              information about their transportation needs.
            </p>
          </div>
          <div class="col-md-4 bg-light">
            <h4>Interactive Features</h4>
            <p>
              Our webpage offers interactive features designed to enhance the
              user experience and streamline the bus tracking process. From
              interactive maps displaying bus routes and current locations to
              customizable preferences for favorite routes or bus stops, users
              can personalize their experience according to their specific needs
              and preferences.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- Trainers section -->
    <section id="testimonial">
      <div class="container">
        <h1 class="text-center">Meet Your Driver</h1>
        <p class="text-center">
          "Get to know the friendly faces behind the wheel who ensure your safe
          travels."
        </p>
        <div class="row">
          <div class="col-md-4">
            <p class="reviwe">
              This driver operates the university bus routes on a daily basis,
              ensuring students are transported safely and efficiently between
              designated stops.<br />
              <i class="fa-brands fa-twitter"></i><span>@user_name</span>
            </p>
            <img src="img/user.png" />
          </div>

          <div class="col-md-4 middle">
            <p class="reviwe">
              This driver serves as a substitute when the regular driver is
              unavailable due to illness, vacation, or other reasons. They are
              trained to handle the same routes and provide continuity in
              service.<br />
              <i class="fa-brands fa-twitter"></i><span>@user_name</span>
            </p>
            <img src="img/user.png" />
          </div>

          <div class="col-md-4">
            <p class="reviwe">
              In case of unexpected situations such as accidents or breakdowns,
              the emergency driver steps in to manage critical situations and
              ensure the safety of passengers until regular service can be
              restored.<br />
              <i class="fa-brands fa-twitter"></i><span>@user_name</span>
            </p>
            <img src="img/user.png" />
          </div>
        </div>
      </div>
    </section>

    <!-- feedback -->

    <section id="about">
      <div class="container">
        <div class="row">
          <div class="col-md-6 text-justify">
            <div class="container mt-5">
              <div class="row">
                <h1 class="mb-4">Student Bus Feedback</h1>
                <div class="col-md-8">
                  <div class="form-group">
                    <label for="rating">Rate the Bus Driver:</label>
                    <div class="rating">
                      <span>★</span>
                      <span>★</span>
                      <span>★</span>
                      <span>★</span>
                      <span>★</span>
                    </div>
                  </div>

                  <form id="feedbackForm" class="mt-4">
                    <div class="mb-3">
                      <label for="studentname" class="form-label"
                        >Student Name
                      </label>
                      <input
                        type="text"
                        id="studentname"
                        class="form-control"
                        required
                      />
                    </div>
                    <div class="mb-3">
                      <label for="routenumber" class="form-label"
                        >Route Number</label
                      >
                      <input
                        type="text"
                        id="routenumber"
                        class="form-control"
                        required
                      />
                    </div>
                    <div class="mb-3">
                      <label for="feedback" class="form-label">Feedback</label>
                      <textarea
                        id="feedback"
                        class="form-control"
                        required
                      ></textarea>
                    </div>
                    <button type="submit" class="btn btn-primary">
                      Submit Feedback
                    </button>
                  </form>
                </div>
              </div>
            </div>
          </div>
          <div class="col-md-5 text-center">
            <img src="img/feedback.jpeg" class="img-fluid" />
          </div>
        </div>
        <div id="reviewsContainer" class="reviews-container"></div>
      </div>
    </section>

    <!-- footer section -->

    <section id="footer">
      <div class="container">
        <div class="row">
          <div class="col-md-3">
            <img src="img/logo-white.png" class="footer-logo" />
            <p>
              "THANK YOU FOR USING OUR BUS TRACKING SERVICE. WE APPRECIATE YOUR
              PATRONAGE!"
            </p>
          </div>
          <div class="col-md-3">
            <h1>Features</h1>
            <p>State-of-the-art equipment</p>
            <p>Expert trainers</p>
            <p>Group bus travel classes</p>
            <p>24/7 access</p>
            <p>Clean and comfortable environment</p>
          </div>

          <div class="col-md-3">
            <h1>Contact Us</h1>
            <p><i class="fa-solid fa-phone"></i>+94 712514638</p>
            <p>
              <i class="fa-solid fa-envelope"></i>
              bus_travel@gmail.com
            </p>
            <p>
              <i class="fa-solid fa-house"></i>123 Main Street<br />
              Apartment 4B Anytown,<br />
              USA 12345
            </p>
          </div>
          <div class="col-md-3">
            <h1>Follow Us On</h1>
            <p><i class="fa-brands fa-facebook"></i> facebook</p>
            <p><i class="fa-brands fa-instagram"></i> instagram</p>
            <p><i class="fa-brands fa-youtube"></i> youtube</p>
            <p><i class="fa-brands fa-linkedin"></i> linkedin</p>
          </div>
        </div>
      </div>
    </section>

    <script src="js/wow.min.js"></script>
    <script>
      new WOW().init();
    </script>

    <!-- feedback -->

    <script type="module">
      // app.js
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-app.js";
      import {
        getDatabase,
        ref,
        push,
        set,
        onChildAdded,
      } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-database.js";

      // Firebase configuration
      const firebaseConfig = {
        apiKey: "AIzaSyCKYdEtZmhE_GLfR1LsIKf75e_YbQjDvSs",
        authDomain: "computing-project-f65ec.firebaseapp.com",
        databaseURL:
          "https://computing-project-f65ec-default-rtdb.firebaseio.com",
        projectId: "computing-project-f65ec",
        storageBucket: "computing-project-f65ec.appspot.com",
        messagingSenderId: "126022707574",
        appId: "1:126022707574:web:795b761b783e0dfa62f257",
        measurementId: "G-XG2N2HVR9M",
      };

      const app = initializeApp(firebaseConfig);
      const database = getDatabase(app);

      // Reference to the 'feedbacks' node
      const feedbacksRef = ref(database, "feedbacks");

      // Function to create a card for each review
      function createReviewCard(studentName, routeNumber, feedback, rating) {
        const container = document.getElementById("reviewsContainer");

        // Create card elements
        const card = document.createElement("div");
        card.classList.add("card", "w-75", "mb-3");

        const cardBody = document.createElement("div");
        cardBody.classList.add("card-body");

        const title = document.createElement("h5");
        title.classList.add("card-title");
        title.textContent = studentName;

        const route = document.createElement("h6");
        route.classList.add("card-title");
        route.textContent = `Route Number: ${routeNumber}`;

        const feedbackText = document.createElement("p");
        feedbackText.classList.add("card-text");
        feedbackText.textContent = feedback;

        const ratingDiv = document.createElement("div");
        ratingDiv.classList.add("rating");

        // Create star elements based on rating and color them accordingly
        for (let i = 0; i < 5; i++) {
          const star = document.createElement("span");
          star.textContent = "★";
          if (i < rating) {
            star.style.color = "gold"; // Color the star if its index is less than the rating
          } else {
            star.style.color = "#ccc"; // Gray out the star if its index is greater than or equal to the rating
          }
          ratingDiv.appendChild(star);
        }

        // Append elements to card
        cardBody.appendChild(title);
        cardBody.appendChild(route);
        cardBody.appendChild(feedbackText);
        cardBody.appendChild(ratingDiv);
        card.appendChild(cardBody);
        container.appendChild(card);
      }

      // Listen for new reviews added to the database
      onChildAdded(feedbacksRef, (snapshot) => {
        const review = snapshot.val();
        createReviewCard(
          review.studentName,
          review.routeNumber,
          review.feedback,
          review.rating
        );
      });

      const ratingStars = document.querySelectorAll(".rating > span");
      let rating = 0;

      ratingStars.forEach((star, index) => {
        star.addEventListener("click", () => {
          rating = index + 1;
          updateRating();
        });

        star.addEventListener("mouseover", () => {
          updateRating(index + 1);
        });

        star.addEventListener("mouseout", () => {
          updateRating();
        });
      });

      function updateRating(newRating = rating) {
        ratingStars.forEach((star, index) => {
          if (index < newRating) {
            star.style.color = "gold";
          } else {
            star.style.color = "#ccc";
          }
        });
      }

      const form = document.querySelector("#feedbackForm");
      form.addEventListener("submit", (event) => {
        event.preventDefault();
        const feedback = document.querySelector("#feedback").value;
        const studentName = document.querySelector("#studentname").value;
        const routeNumber = document.querySelector("#routenumber").value;

        const feedbacksRef = ref(database, "feedbacks"); // Reference to "feedbacks" node
        const newFeedbackRef = push(feedbacksRef); // Push generates a new child location
        set(newFeedbackRef, {
          studentName: studentName,
          routeNumber: routeNumber,
          feedback: feedback,
          rating: rating,
        })
          .then(() => {
            alert("Thank you for your feedback!");
            form.reset();
            rating = 0;
            updateRating();
          })
          .catch((error) => {
            console.error(
              "Error writing feedback to Firebase Database: ",
              error
            );
            alert(
              "Error occurred while submitting feedback. Please try again later."
            );
          });
      });
    </script>

    <!-- <script type="module" src="app.js"></script> -->
  </body>
</html>
